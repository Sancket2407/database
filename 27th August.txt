CREATE database DBDA19;

CREATE table Member
(
MembID int AUTO_INCREMENT primary key,
FName Varchar(20) NOT NULL, MName varchar(20), LName varchar(20) NOT NULL,
Memb_DOJ date, Email varchar(30), Phone char(10),
Mem_type ENUM('Regular','Silver','Gold','Platinum')
);

CREATE table Book
(
BookID int AUTO_INCREMENT primary key, BookName varchar(50) NOT NULL, Price decimal(6,2)
);

COLUMN OPERATION=

ALTER TABLE Book
ADD COLUMN Author varchar(20) NOT NULL;

--ADD CONSTRAINT:

ALTER TABLE Member
ADD CONSTRAINT Member_Email_UQ
UNIQUE (Email);

INSERT INTO Member
(FName, MName, LName, Memb_DOJ, Email, Phone, Mem_Type)
VALUES 
('Sancket', NULL, 'SAWANT', 20190819,'abc123@gmail.com', '1234567890', 'Platinum');

INSERT INTO Member
(FName, MName, LName, Memb_DOJ, Email, Phone, Mem_Type)
VALUES 
('Girish','D.','Dukare',now(),'abc123@gmail.com', '9876543210','Gold');

CREATE TABLE BookTran
(
	TranID int AUTO_INCREMENT primary key,
	TranDate datetime ,
	BookID int REFERENCES Book(BookID),
	MemberID int REFERENCES Member(MembID)
);

CREATE TABLE BookTran
(
	TranID int AUTO_INCREMENT primary key,
	TranDate datetime ,
	BookID int,
	CONSTRAINT BookTran_BookID_FK
	FOREIGN KEY(BookID) REFERENCES Book(BookID),
	MemberID int,
	CONSTRAINT BookTran_MembID_FK
	FOREIGN KEY(MemberID) REFERENCES Member(MembID)
);

INSERT INTO BOOK
( BookName, Price, Author)
VALUES
('Let us Know C',530.12,'Yashwant Kanitkar');


INSERT INTO BOOK
( BookName, Price, Author)
VALUES
('Let us Know C++',500.12,'BALAGURU SWAMI');

INSERT INTO BookTran
(TranDate, BookID, MemberID)
VALUES(now(), 1,4);

